var agescx=function(t){function e(a){if(n[a])return n[a].exports;var i=n[a]={exports:{},id:a,loaded:!1};return t[a].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="/build/",e(0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){var a=n(2),i=n(22);e.readScenario=function(t,e){return void 0===e&&(e=!1),a["default"](i.createASDataView(t),e)},e.readScenarioNode=function(t,e){void 0===e&&(e=!1);var o=n(!function(){var t=new Error('Cannot find module "fs"');throw t.code="MODULE_NOT_FOUND",t}()),r=o.readFileSync(t);return a["default"](i.createASDataView(r.buffer),e)},Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={readScenario:e.readScenario,readScenarioNode:e.readScenarioNode},console.log("starting from node enviroment")},function(t,e,n){var a=n(3),i=n(10),o=n(11),r=n(12),s=n(13),u=n(14),c=n(15),l=n(16),f=n(17),d=n(18),g=n(19),p=n(20),h=n(21),v=function(t,e){void 0===e&&(e=!1),e&&console.log("AgeScx: starting reading scenario");var n=a["default"](),v=n.players.slice(1,9),y=n.players.slice(0,9);r.readHeader(n,t),e&&console.log("AgeScx: header loaded, version = "+n.header.version),t.inflate(n.header.size+8),n.setup.nextId=t.getUint32()[0],n.version=t.getFloat32()[0],e&&console.log("AgeScx: compressed data version = "+n.version),y.forEach(function(e){e.name=t.getChar(256).join("")}),t.skip(1792),y.forEach(function(e){e.nameId=t.getInt32()[0]}),t.skip(28),s.readPlayerData1(n,t),e&&console.log("AgeScx: Player Data #1 - Basic Info"),t.skip(4),t.skip(4),t.skip(1),n.setup.filename=t.getStr16()[0],d.readMessages(n,t),e&&console.log("AgeScx: Messages"),g.readCinematics(n,t),e&&console.log("AgeScx: Cinematics"),p.readImage(n,t),e&&console.log("AgeScx: Background Image"),u.readPlayerData2(n,t),e&&console.log("AgeScx: Player Data #2 - AI section"),t.skip(384),t.skip(4),f.readGoals(n,t),e&&console.log("AgeScx: Scenario Goals"),v.forEach(function(e){e.diplomacy=t.getInt32(8),t.skip(32)}),t.skip(512),t.skip(11520),t.skip(4),t.skip(64),e&&console.log("AgeScx: Diplomacy"),h.readDisabled(n,t),e&&console.log("AgeScx: Disables"),t.skip(8),n.setup.allTech=t.getInt32()[0],y.forEach(function(e){e.age=t.getInt32()[0]}),t.skip(28),t.skip(4),n.setup.startCam=t.getInt32(2),n.setup.aiType=t.getUint32()[0],n.setup.width=t.getUint32()[0],n.setup.height=t.getUint32()[0],e&&console.log("AgeScx: Scenario setup");for(var k=0;k<n.setup.width*n.setup.height;k++)n.tiles.push(i.readTile(t));e&&console.log("AgeScx: Scenario tiles"),t.skip(4),c.readPlayerData3(n,t),e&&console.log("AgeScx: Player Data #3 - Resources"),y.forEach(function(e){for(var n=t.getUint32()[0],a=0;n>a;a++)e.units.push(o.readUnit(t))}),e&&console.log("AgeScx: Scenario Units"),t.skip(4),l.readPlayerData4(n,t),e&&console.log("AgeScx: Player Data #4 - Advanced"),t.skip(8),t.skip(1),console.log(n)};Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=v},function(t,e,n){var a=n(4),i=n(8),o=n(9),r=function(){return{header:o["default"](),version:1.22,players:[a["default"](),a["default"](),a["default"](),a["default"](),a["default"](),a["default"](),a["default"](),a["default"](),a["default"]()],messages:{objectives:i["default"](),hints:i["default"](),victory:i["default"](),loss:i["default"](),history:i["default"](),scout:i["default"]()},cinematics:{intro:"",defeat:"",victory:""},image:{filename:"",included:0,width:0,height:0,exists:0,raw:""},goals:{conquest:0,relics:0,exploration:0,all:0,mode:0,score:0,time:0,unk1:0,unk2:0,unk3:0},setup:{allTech:0,aiType:0,startCam:[0,0],height:0,width:0,nextId:0,filename:""},tiles:[],triggers:[]}};Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=r},function(t,e,n){var a=n(5),i=n(6),o=n(7),r=function(){return{name:"",nameId:0,constName:"",active:0,human:0,civ:a["default"].Britons,unk1:0,unk2:0,unk3:0,aiName:"",aiSource:"",aiType:0,age:o["default"].None,population:100,color:i["default"].Gray,food:0,wood:0,gold:0,stone:0,ore:0,diplomacy:[],alliedVict:0,startCam:[0,0],disTechs:[],disBuildings:[],disUnits:[],units:[]}};Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=r},function(t,e){var n;!function(t){t[t.Britons=0]="Britons",t[t.Franks=1]="Franks",t[t.Goths=3]="Goths",t[t.Teutons=4]="Teutons",t[t.Japanese=5]="Japanese",t[t.Chinese=6]="Chinese",t[t.Byzantines=7]="Byzantines",t[t.Persians=8]="Persians",t[t.Saracens=9]="Saracens",t[t.Turks=10]="Turks",t[t.Vikings=11]="Vikings",t[t.Mongols=12]="Mongols",t[t.Celts=13]="Celts",t[t.Spanish=14]="Spanish",t[t.Aztecs=15]="Aztecs",t[t.Mayans=16]="Mayans",t[t.Huns=17]="Huns",t[t.Koreans=18]="Koreans"}(n||(n={})),Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n},function(t,e){var n;!function(t){t[t.Blue=0]="Blue",t[t.Red=1]="Red",t[t.Green=2]="Green",t[t.Yellow=3]="Yellow",t[t.Cyan=4]="Cyan",t[t.Purple=5]="Purple",t[t.Gray=6]="Gray",t[t.Orange=7]="Orange"}(n||(n={})),Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n},function(t,e){var n;!function(t){t[t.None=-1]="None",t[t.Dark=0]="Dark",t[t.Feudal=1]="Feudal",t[t.Castle=2]="Castle",t[t.Imperial=3]="Imperial",t[t.PostImperial=4]="PostImperial"}(n||(n={})),Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n},function(t,e){var n=function(){return{id:0,text:""}};Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n},function(t,e){var n=function(t){return void 0===t&&(t="1.21"),{version:"",size:0,lastSave:20,instructions:"",players:8,unknown1:2,unknown2:0}};Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n},function(t,e){e.readTile=function(t){return{type:t.getUint8()[0],level:t.getUint8()[0],unk1:t.getUint8()[0]}}},function(t,e){e.readUnit=function(t){return{x:t.getFloat32()[0],y:t.getFloat32()[0],unk1:t.getFloat32()[0],id:t.getUint32()[0],type:t.getUint16()[0],unk2:t.getInt8()[0],angle:t.getFloat32()[0],frame:t.getUint16()[0],inId:t.getInt32()[0]}}},function(t,e){e.readHeader=function(t,e){var n=t.header;n.version=e.getChar(4).join(""),n.size=e.getUint32()[0],n.unknown1=e.getUint32()[0],n.lastSave=e.getUint32()[0],n.instructions=e.getStr32()[0],n.unknown2=e.getInt32()[0],n.players=e.getInt32()[0]}},function(t,e){e.readPlayerData1=function(t,e){var n=t.players;n.forEach(function(t){t.active=e.getUint32()[0],t.human=e.getUint32()[0],t.civ=e.getInt32()[0],t.unk1=e.getUint32()[0]}),e.skip(112)}},function(t,e){e.readPlayerData2=function(t,e){for(var n=t.players.slice(1,9),a=0;16>a;a++)e.getStr16(),e.getStr16();n.forEach(function(t){t.aiName=e.getStr16()[0]});for(var a=0;8>a;a++)e.getStr16();n.forEach(function(t){e.skip(8),t.aiSource=e.getStr32()[0]});for(var a=0;8>a;a++)e.skip(8),e.getStr32();n.forEach(function(t){t.aiType=e.getInt8()[0]}),e.skip(8),e.skip(4)}},function(t,e){e.readPlayerData3=function(t,e){var n=t.players.slice(1,9);n.forEach(function(t){t.food=e.getFloat32()[0],t.wood=e.getFloat32()[0],t.gold=e.getFloat32()[0],t.stone=e.getFloat32()[0],t.ore=e.getFloat32()[0],e.skip(4),t.population=e.getFloat32()[0]})}},function(t,e){e.readPlayerData4=function(t,e){var n=t.players.slice(1,9);n.forEach(function(t){t.constName=e.getStr16()[0],t.startCam=[e.getFloat32()[0],e.getFloat32()[0]],e.skip(4),e.skip(1);var n=e.getUint16()[0];e.skip(1*n),e.skip(36),t.color=e.getUint32()[0],t.unk2=e.getFloat32()[0],t.unk3=e.getUint16()[0],2===t.unk2&&e.skip(8),e.skip(44*t.unk3),e.skip(7),e.skip(4)})}},function(t,e){e.readGoals=function(t,e){var n=t.goals;n.conquest=e.getInt32()[0],n.unk1=e.getInt32()[0],n.relics=e.getInt32()[0],n.unk2=e.getInt32()[0],n.exploration=e.getInt32()[0],n.unk3=e.getInt32()[0],n.all=e.getInt32()[0],n.mode=e.getInt32()[0],n.score=e.getInt32()[0],n.time=e.getInt32()[0]}},function(t,e){e.readMessages=function(t,e){var n=t.messages;n.objectives.id=e.getInt32()[0],n.hints.id=e.getInt32()[0],n.victory.id=e.getInt32()[0],n.loss.id=e.getInt32()[0],n.history.id=e.getInt32()[0],n.scout.id=e.getInt32()[0],n.objectives.text=e.getStr16()[0],n.hints.text=e.getStr16()[0],n.victory.text=e.getStr16()[0],n.loss.text=e.getStr16()[0],n.history.text=e.getStr16()[0],n.scout.text=e.getStr16()[0]}},function(t,e){e.readCinematics=function(t,e){var n=t.cinematics;n.intro=e.getStr16()[0],n.defeat=e.getStr16()[0],n.victory=e.getStr16()[0]}},function(t,e){e.readImage=function(t,e){var n=t.image;n.filename=e.getStr16()[0],n.included=e.getInt32()[0],n.width=e.getInt32()[0],n.height=e.getInt32()[0],n.exists=e.getInt16()[0],-1===n.exists||2===n.exists}},function(t,e){e.readDisabled=function(t,e){var n=t.players.slice(1,9);e.skip(64),n.forEach(function(t){t.disTechs=e.getInt32(30)}),e.skip(960),e.skip(64),n.forEach(function(t){t.disUnits=e.getInt32(30)}),e.skip(960),e.skip(64),n.forEach(function(t){t.disBuildings=e.getInt32(20)}),e.skip(640)}},function(t,e,n){var a=n(23);e.createASDataView=function(t){return new a["default"](new DataView(t))}},function(t,e){var n=function(){function t(t,e){void 0===e&&(e=0),this.offset=0,this._data=null,this.offset=e,this._data=t}return t.prototype.skip=function(t){return this.offset+=t,this.offset},t.prototype.toOffset=function(t){this.offset=t},t.prototype.inflate=function(t){void 0===t&&(t=0);var e=new Uint8Array(this._data.buffer.slice(t)),n=pako.inflate(e,{raw:!0});this._data=new DataView(n.buffer),this.offset=0},t.prototype.getBytes=function(t){return void 0===t&&(t=1),this.offset+=t,new Uint8Array(this._data.buffer.slice(this.offset-t,t))},t.prototype.getChar=function(t){var e=this;return void 0===t&&(t=1),this._repeater(t,function(t){return String.fromCharCode(e._data.getInt8(t))},1)},t.prototype.getStr16=function(t){void 0===t&&(t=1);for(var e=new Array,n=0;t>n;n++)e.push(this.getChar(this.getUint16(1)[0]).join(""));return e},t.prototype.getStr32=function(t){void 0===t&&(t=1);for(var e=new Array,n=0;t>n;n++)e.push(this.getChar(this.getUint32(1)[0]).join(""));return e},t.prototype.getInt8=function(t){var e=this;return void 0===t&&(t=1),this._repeater(t,function(t){return e._data.getInt8(t)},1)},t.prototype.getUint8=function(t){var e=this;return void 0===t&&(t=1),this._repeater(t,function(t){return e._data.getUint8(t)},1)},t.prototype.getInt16=function(t){var e=this;return void 0===t&&(t=1),this._repeater(t,function(t){return e._data.getInt16(t,!0)},2)},t.prototype.getUint16=function(t){var e=this;return void 0===t&&(t=1),this._repeater(t,function(t){return e._data.getUint16(t,!0)},2)},t.prototype.getInt32=function(t){var e=this;return void 0===t&&(t=1),this._repeater(t,function(t){return e._data.getInt32(t,!0)},4)},t.prototype.getUint32=function(t){var e=this;return void 0===t&&(t=1),this._repeater(t,function(t){return e._data.getUint32(t,!0)},4)},t.prototype.getFloat32=function(t){var e=this;return void 0===t&&(t=1),this._repeater(t,function(t){return e._data.getFloat32(t,!0)},4)},t.prototype.getFloat64=function(t){return void 0===t&&(t=1),this._repeater(t,this._data.getFloat64,8)},t.prototype._repeater=function(t,e,n){for(var a=new Array,i=e.bind(this._data),o=0;t>o;o++)a.push(i(this.offset)),this.offset+=n;return a},t}();Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n}]);